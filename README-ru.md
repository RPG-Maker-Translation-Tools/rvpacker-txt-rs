# rvpacker-txt-rs

## Основная информация

Этот инструмент предназначен для чтения файлов RPG Maker игр в `.txt` файлы и записывания их обратно в изначальную форму.

Своё имя этот инструмент наследует от оригинального инструмента `rvpacker`, который был создан ещё для тех версий RPG Maker, что не использовали `.json` файлы, и который парсил файлы в YAML. В данный момент, репозиторий rvpacker удалён.

Устаревший инструмент с тем же функционалом, написанный на Ruby, можно найти в [репозитории rvpacker-txt](https://github.com/savannstm/rvpacker-txt).

Также разрабатывается [графический интерфейс](https://github.com/savannstm/rpgmtranslate), позволяющий удобно переводить игры.

Библиотека, лежащая в основе этого интерфейса, может быть найдена [здесь](https://github.com/savannstm/rvpacker-txt-rs-lib).

## Формат выходных файлов

`rvpacker-txt-rs` парсит весь оригинальный текст из файлов игры, и помещает его на каждую линию текстового файла. Все переносы линий (переносы строк, новые линии, `\n`) заменяются на символы `\#`.
В конце каждой оригинальной строки, программа вставляет символы `<#>`. Это - разделитель, после которого должен начинаться переведённый текст. Удаление этого разделителя или нарушение его символов может привести к ошибкам, или хуже, неопределённому поведению программы. **Помните: ваш переведённый текст всегда должен начинаться после разделителя `<#>`.**

Для примера, как правильно переводить .txt файлы, обратитесь к моему [русскому переводу на Fear & Hunger 2: Termina](https://github.com/savannstm/fh2-termina-translation).

## Установка

Скачать бинарные файлы можно в разделе Releases.

Файлы с расширением .exe предназначены для Windows x64, в то время как файлы без расширения предназначены для Linux x64.

## Использование

Получить справку по использованию можно, вызвав `rvpacker-txt-rs -h`.

```text
Инструмент, позволяющий парсить текст из файлов RPG Maker XP/VX/VXAce/MV/MZ игр в .txt файлы, а затем записывать их
обратно в совместимые файлы. Программа всегда будет использовать директории "original" или "data" для хранения исходных
файлов, а также директорию "translation" для работы с файлами перевода. Программа также расшифрует любой зашифрованный
архив .rgss, если он присутствует.

Использование: rvpacker-txt-rs КОМАНДА [ОПЦИИ]

Команды:
  read
          Парсит файлы из папки "original" или "data" ("Data") входной директории в папку "translation" выходной
          директории. Если папка "Data" не существует, а во входной директории есть архив .rgss, программа автоматически
          расшифровывает его.
  write
          Записывает переведенные файлы, используя исходные файлы из папки "original" или "data" ("Data") входной
          директории, применяя текст из .txt файлов папки "translation", выводя результаты в папку "output" выходной
          директории.
  purge
          Удаляет неиспользуемые строки из текстовых файлов перевода.
  json
          Предоставляет команды для генерации JSON файлов и их записи.

Опции:
  -i, --input-dir <ВХОДНОЙ_ПУТЬ>
          Входная директория, содержащая файлы игры.
  -o, --output-dir <ВЫХОДНОЙ_ПУТЬ>
          Выходная директория, в которую будут помещены выходные файлы.
      --disable-processing <ИМЕНА_ФАЙЛОВ>
          Не обрабатывает указанные файлы. plugins может применятся взаимозаменяемо со scripts.
          Пример: --disable-processing=maps,other,system
          [Разрешённые значения: maps, other, system, plugins, scripts]
          [Также: no]
  -r, --romanize
          Если вы парсите текст из японской игры, содержащей символы вроде 「」, являющимися обычными японскими кавычками,
          программа автоматически заменяет эти символы на их европейские эквиваленты. (в данном случае, '').
          Этот аргумент будет автоматически установлен при командах write/read вместе с --mode append/purge, если текст
          игры был прочитан с его использованием.
  -v, --version
          Отобразить версию программы.
      --disable-custom-processing
          Отключает использование индивидуальных способов обработки текста, имплементированных для некоторых игр.
          Этот аргумент будет автоматически установлен при командах write/read вместе с --mode append/purge, если текст
          игры был прочитан с его использованием.
          [Также: no-custom]
  -l, --language <ЯЗЫК>
          Устанавливает локализацию инструмента на выбранный язык.
          Пример: --language en
          [Разрешённые значения: en, ru]
      --log
          Включает логирование.
  -h, --help
          Выводит справочную информацию по программе либо по введёной команде.
```

Например:

`rvpacker-txt-rs read -i "E:/Documents/RPGMakerGame"` распарсит текст игры в папку `translation` указанной директории.

`rvpacker-txt-rs write -i "E:/Documents/RPGMakerGame"` запишет перевод из `.txt` файлов папки `translation` в файлы RPG Maker в папке `output`.

## Лицензия

Репозиторий лицензирован под [WTFPL](http://www.wtfpl.net/).
